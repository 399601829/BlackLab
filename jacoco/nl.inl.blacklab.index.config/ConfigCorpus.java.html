<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ConfigCorpus.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">BlackLab</a> &gt; <a href="index.source.html" class="el_package">nl.inl.blacklab.index.config</a> &gt; <span class="el_source">ConfigCorpus.java</span></div><h1>ConfigCorpus.java</h1><pre class="source lang-java linenums">package nl.inl.blacklab.index.config;

import java.util.Collections;
import java.util.LinkedHashMap;
import java.util.Map;

/**
 * Settings that will be used to write the indexmetadata file
 * for any corpus we create from this format.
 *
 * Stuff used by BLS and user interfaces.
 *
 * None of these settings have any impact on indexing.
 * All fields are optional.
 */
<span class="fc" id="L16">public class ConfigCorpus {</span>

    /** Text direction: left-to-right or right-to-left (and possible future values?) */
<span class="pc" id="L19">    public static enum TextDirection {</span>
<span class="fc" id="L20">        LEFT_TO_RIGHT(&quot;ltr&quot;, &quot;lefttoright&quot;),</span>
<span class="fc" id="L21">        RIGHT_TO_LEFT(&quot;rtl&quot;, &quot;righttoleft&quot;);</span>

        private String[] codes;

<span class="fc" id="L25">        private TextDirection(String... codes) {</span>
<span class="fc" id="L26">            this.codes = codes;</span>
<span class="fc" id="L27">        }</span>

        /**
         * Get the primary string code for this TextDirection.
         * @return string code
         */
        public String getCode() {
<span class="fc" id="L34">            return this.codes[0];</span>
        }

        /**
         * Does the specified code match this value?
         * @param code code to match, e.g. &quot;LTR&quot; or &quot;right-to-left&quot;
         * @return true if it matches, false if not
         */
        public boolean matchesCode(String code) {
<span class="fc" id="L43">            code = code.toLowerCase().replaceAll(&quot;[^a-z]&quot;, &quot;&quot;); // remove any spaces, dashes, etc.</span>
<span class="fc bfc" id="L44" title="All 2 branches covered.">            for (String checkCode: codes) {</span>
<span class="fc bfc" id="L45" title="All 2 branches covered.">                if (checkCode.equals(code))</span>
<span class="fc" id="L46">                    return true;</span>
            }
<span class="fc" id="L48">            return false;</span>
        }

        /** Return a TextDirection from a string code (e.g. &quot;LTR&quot;, &quot;right-to-left&quot;, etc.)
         *
         * @param code textDirection code to recognize
         * @return corresponding TextDirection
         */
        public static TextDirection fromCode(String code) {
<span class="pc bpc" id="L57" title="1 of 2 branches missed.">            for (TextDirection d: TextDirection.values()) {</span>
<span class="fc bfc" id="L58" title="All 2 branches covered.">                if (d.matchesCode(code))</span>
<span class="fc" id="L59">                    return d;</span>
            }
<span class="nc" id="L61">            return LEFT_TO_RIGHT; // default value</span>
        }
    }

    /** Corpus display name */
<span class="fc" id="L66">    private String displayName = &quot;&quot;;</span>

    /** Corpus description */
<span class="fc" id="L69">    private String description = &quot;&quot;;</span>

    /** May end user fetch contents of whole documents? [false] */
<span class="fc" id="L72">    private boolean contentViewable = false;</span>

    /** What is the text direction of the script used? (e.g. LTR / RTL) */
<span class="fc" id="L75">    private TextDirection textDirection = TextDirection.LEFT_TO_RIGHT;</span>

    /** Special field roles, such as pidField, titleField, etc. */
<span class="fc" id="L78">    Map&lt;String, String&gt; specialFields = new LinkedHashMap&lt;&gt;();</span>

    /** How to group metadata fields */
<span class="fc" id="L81">    Map&lt;String, ConfigMetadataFieldGroup&gt; metadataFieldGroups = new LinkedHashMap&lt;&gt;();</span>

    public ConfigCorpus copy() {
<span class="fc" id="L84">        ConfigCorpus result = new ConfigCorpus();</span>
<span class="fc" id="L85">        result.contentViewable = contentViewable;</span>
<span class="fc" id="L86">        result.textDirection = textDirection;</span>
<span class="fc" id="L87">        result.specialFields.putAll(specialFields);</span>
<span class="pc bpc" id="L88" title="1 of 2 branches missed.">        for (ConfigMetadataFieldGroup g: getMetadataFieldGroups().values()) {</span>
<span class="nc" id="L89">            result.addMetadataFieldGroup(g.copy());</span>
<span class="nc" id="L90">        }</span>
<span class="fc" id="L91">        return result;</span>
    }

    public Map&lt;String, String&gt; getSpecialFields() {
<span class="nc" id="L95">        return Collections.unmodifiableMap(specialFields);</span>
    }

    public void addSpecialField(String type, String fieldName) {
<span class="nc" id="L99">        specialFields.put(type, fieldName);</span>
<span class="nc" id="L100">    }</span>

    public Map&lt;String, ConfigMetadataFieldGroup&gt; getMetadataFieldGroups() {
<span class="fc" id="L103">        return metadataFieldGroups;</span>
    }

    void addMetadataFieldGroup(ConfigMetadataFieldGroup g) {
<span class="nc" id="L107">        metadataFieldGroups.put(g.getName(), g);</span>
<span class="nc" id="L108">    }</span>

    public boolean isContentViewable() {
<span class="nc" id="L111">        return contentViewable;</span>
    }

    public void setContentViewable(boolean contentViewable) {
<span class="fc" id="L115">        this.contentViewable = contentViewable;</span>
<span class="fc" id="L116">    }</span>

    public TextDirection getTextDirection() {
<span class="nc" id="L119">        return this.textDirection;</span>
    }

    public void setTextDirection(TextDirection textDirection) {
<span class="fc" id="L123">        this.textDirection = textDirection;</span>
<span class="fc" id="L124">    }</span>

    public String getDisplayName() {
<span class="nc" id="L127">        return displayName;</span>
    }

    public void setDisplayName(String displayName) {
<span class="fc" id="L131">        this.displayName = displayName;</span>
<span class="fc" id="L132">    }</span>

    public String getDescription() {
<span class="nc" id="L135">        return description;</span>
    }

    public void setDescription(String description) {
<span class="fc" id="L139">        this.description = description;</span>
<span class="fc" id="L140">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>